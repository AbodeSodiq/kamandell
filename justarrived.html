<!-- JUST ARRIVED (replace your existing section with this block) -->
<section class="just-arrived2">
  <h2>JUST ARRIVED</h2>
  <div class="arrived-grid2">
    
    <!-- Big Featured Product -->
    <div class="product-card2 big-product2" data-images='[
      "https://www.shopbcode.com/cdn/shop/products/Screenshot-2023-08-08-at-4-20-09-PM.png?v=1757421508&width=980",
      "https://www.shopbcode.com/cdn/shop/files/2c79fe80a887bb99e72e82e8c3594b5f.webp?v=1750259731&width=5000",
      "https://res.cloudinary.com/dtc2q8arn/image/upload/v1721124381/Go%20Live%20images/GZ0026/GZ0026_1_FOOTWEAR_Photography_Side_Lateral_Center_View_grey_c8mhcc.jpg",
      "https://www.shopbcode.com/cdn/shop/files/959c80308e7128ad13a0971206ccfd25.jpg?v=1755599028&width=5000"
    ]'>
      <span class="discount-badge2">40% OFF</span>
      <img src="https://www.shopbcode.com/cdn/shop/products/Screenshot-2023-08-08-at-4-20-09-PM.png?v=1757421508&width=980" alt="Adidas Runner">
     <button class="prev" aria-label="Previous image">&lsaquo;</button> <!-- ‹ -->
<button class="next" aria-label="Next image">&rsaquo;</button> <!-- › -->


      <div class="overlay2">
        <h3>Adidas Runner</h3>
        <p>
          <span class="new-price2">$120</span>
          <span class="old-price2">$200</span>
        </p>
        <button class="quick-buy2">Quick Buy</button>
      </div>
    </div>

    <!-- Right column with 3 stacked products -->
    <div class="right-column2">

      <!-- Nike Air -->
      <div class="product-card2" data-images='[
      "https://www.shopbcode.com/cdn/shop/products/Screenshot-2023-08-08-at-4-20-09-PM.png?v=1757421508&width=980",
      "https://www.shopbcode.com/cdn/shop/files/2c79fe80a887bb99e72e82e8c3594b5f.webp?v=1750259731&width=5000",
      "https://res.cloudinary.com/dtc2q8arn/image/upload/v1721124381/Go%20Live%20images/GZ0026/GZ0026_1_FOOTWEAR_Photography_Side_Lateral_Center_View_grey_c8mhcc.jpg",
      "https://www.shopbcode.com/cdn/shop/files/959c80308e7128ad13a0971206ccfd25.jpg?v=1755599028&width=5000"
      ]'>
        <span class="discount-badge2">40% OFF</span>
        <img src="https://www.shopbcode.com/cdn/shop/files/2c79fe80a887bb99e72e82e8c3594b5f.webp?v=1750259731&width=5000" alt="Nike Air">
        <button class="prev" aria-label="Previous image">&lsaquo;</button> <!-- ‹ -->
<button class="next" aria-label="Next image">&rsaquo;</button> <!-- › -->

        <div class="overlay2">
          <h3>Nike Air</h3>
          <p>
            <span class="new-price2">$140</span>
            <span class="old-price2">$230</span>
          </p>
          <button class="quick-buy2">Quick Buy</button>
        </div>
      </div>

      <!-- Puma Classic -->
      <div class="product-card2" data-images='[
      "https://www.shopbcode.com/cdn/shop/products/Screenshot-2023-08-08-at-4-20-09-PM.png?v=1757421508&width=980",
      "https://www.shopbcode.com/cdn/shop/files/2c79fe80a887bb99e72e82e8c3594b5f.webp?v=1750259731&width=5000",
      "https://res.cloudinary.com/dtc2q8arn/image/upload/v1721124381/Go%20Live%20images/GZ0026/GZ0026_1_FOOTWEAR_Photography_Side_Lateral_Center_View_grey_c8mhcc.jpg",
      "https://www.shopbcode.com/cdn/shop/files/959c80308e7128ad13a0971206ccfd25.jpg?v=1755599028&width=5000"
      ]'>
        <span class="discount-badge2">40% OFF</span>
        <img src="https://res.cloudinary.com/dtc2q8arn/image/upload/v1721124381/Go%20Live%20images/GZ0026/GZ0026_1_FOOTWEAR_Photography_Side_Lateral_Center_View_grey_c8mhcc.jpg" alt="Puma Classic">
       <button class="prev" aria-label="Previous image">&lsaquo;</button> <!-- ‹ -->
<button class="next" aria-label="Next image">&rsaquo;</button> <!-- › -->
        <div class="overlay2">
          <h3>Puma Classic</h3>
          <p>
            <span class="new-price2">$95</span>
            <span class="old-price2">$160</span>
          </p>
          <button class="quick-buy2">Quick Buy</button>
        </div>
      </div>

      <!-- Reebok Zoom -->
      <div class="product-card2" data-images='[
       "https://www.shopbcode.com/cdn/shop/products/Screenshot-2023-08-08-at-4-20-09-PM.png?v=1757421508&width=980",
      "https://www.shopbcode.com/cdn/shop/files/2c79fe80a887bb99e72e82e8c3594b5f.webp?v=1750259731&width=5000",
      "https://res.cloudinary.com/dtc2q8arn/image/upload/v1721124381/Go%20Live%20images/GZ0026/GZ0026_1_FOOTWEAR_Photography_Side_Lateral_Center_View_grey_c8mhcc.jpg",
      "https://www.shopbcode.com/cdn/shop/files/959c80308e7128ad13a0971206ccfd25.jpg?v=1755599028&width=5000"
      ]'>
        <span class="discount-badge2">40% OFF</span>
        <img src="https://www.shopbcode.com/cdn/shop/files/959c80308e7128ad13a0971206ccfd25.jpg?v=1755599028&width=5000" alt="Reebok Zoom">
        <button class="prev" aria-label="Previous image">&lsaquo;</button> <!-- ‹ -->
<button class="next" aria-label="Next image">&rsaquo;</button> <!-- › -->
        <div class="overlay2">
          <h3>Reebok Zoom</h3>
          <p>
            <span class="new-price2">$110</span>
            <span class="old-price2">$180</span>
          </p>
          <button class="quick-buy2">Quick Buy</button>
        </div>
      </div>

    </div>
  </div>
</section>

<style>
/* layout kept as requested */
.just-arrived2 { background: white; padding: 50px 20px; }
.just-arrived2 h2 { text-align:center; font-size:3rem; margin-bottom:30px; letter-spacing:2px; }
.arrived-grid2 { display:grid; grid-template-columns:2fr 1fr; gap:20px; max-width:1600px; margin:auto; align-items:stretch; }

/* big product height */
.big-product2 { max-height: 620px; }

/* product */
.product-card2 { position:relative; overflow:hidden; border-radius:12px; cursor:pointer; background:#000; }
.product-card2 img { width:100%; height:100%; object-fit:cover; display:block; transition:opacity .35s ease, transform .35s ease; }
.product-card2:hover img { transform: scale(1.05); }

/* overlay */
.overlay2 { position:absolute; bottom:0; left:0; width:100%; padding:15px; background: rgba(0,0,0,0.9)); color: black; }
.overlay2 h3 { margin:5px 0; font-size:1.1rem; font-weight:700; }
.overlay2 p { margin:6px 0 8px; font-size:0.95rem; color:black }
.new-price2 { color:#4CAF50; font-weight:700; margin-right:8px; }
.old-price2 { text-decoration:line-through; color:#bbb; margin-left:6px; }

/* quick buy */
.quick-buy2 { margin-top:8px; background:black; border:none; padding:8px 14px; color:#fff; border-radius:6px; cursor:pointer; }
.quick-buy2:hover { background:white; color: black;}

/* arrows (z-index & pointer-events ensure clicks register) */
.product-card2 button.prev, .product-card2 button.next {
  position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.6); border:none; color:#fff; font-size:1.4rem;
  width:40px; height:40px; border-radius:50%; cursor:pointer; display:none;
  align-items:center; justify-content:center; z-index:6; pointer-events:auto;
}
.product-card2 button.prev { left:12px; }
.product-card2 button.next { right:12px; }
/* show arrows on hover (desktop) */
.product-card2:hover button.prev, .product-card2:hover button.next { display:flex; }

/* badge */
.discount-badge2 { position:absolute; top:10px; left:10px; background:#ff4d4d; color:#fff; font-size:0.8rem; font-weight:700; padding:4px 8px; border-radius:4px; z-index:6; }

/* right column */
.right-column2 { display:grid; grid-auto-rows:200px; gap:20px; }
.right-column2 .product-card2 { height:100%; }

/* mobile: show arrows always (no hover) and keep layout */
@media(max-width:900px){
  .arrived-grid2 { grid-template-columns:1fr; }
  .right-column2 { grid-template-rows:none; }
  .right-column2 .product-card2 { height:200px; }
  .product-card2:hover button.prev, .product-card2:hover button.next { display:flex; }
}
</style>

<script>
/*
 Robust per-card slider logic using dataset for index and JSON data-images.
 This implementation avoids closure/state bugs and ensures each card is independent.
*/
(function(){
  const cards = document.querySelectorAll('.product-card2');

  cards.forEach(card => {
    const raw = card.getAttribute('data-images');
    if (!raw) return;
    let images;
    try {
      images = JSON.parse(raw);
      if (!Array.isArray(images) || images.length === 0) throw new Error('no images');
    } catch (err) {
      console.error('Invalid data-images on card', err, raw);
      return;
    }

    const imgEl = card.querySelector('img');
    const btnPrev = card.querySelector('.prev');
    const btnNext = card.querySelector('.next');

    // Preload images
    images.forEach(src => { const i = new Image(); i.src = src; });

    // store current index on dataset (string)
    card.dataset.index = '0';

    const setIndex = (newIndex) => {
      const n = images.length;
      const idx = ((newIndex % n) + n) % n; // wrap
      card.dataset.index = String(idx);
      if (imgEl) imgEl.src = images[idx];
    };

    // initialize
    setIndex(0);

    // Next / Prev handlers
    if (btnNext) btnNext.addEventListener('click', (e) => {
      e.stopPropagation();
      const cur = parseInt(card.dataset.index || '0', 10);
      setIndex(cur + 1);
    });

    if (btnPrev) btnPrev.addEventListener('click', (e) => {
      e.stopPropagation();
      const cur = parseInt(card.dataset.index || '0', 10);
      setIndex(cur - 1);
    });

    // Hover behavior: advance once, then optionally revert after delay
    let hoverRevertTimeout = null;
    card.addEventListener('mouseenter', () => {
      // advance to next
      const cur = parseInt(card.dataset.index || '0', 10);
      setIndex(cur + 1);

      // clear any existing timeout
      if (hoverRevertTimeout) {
        clearTimeout(hoverRevertTimeout);
        hoverRevertTimeout = null;
      }

      // revert after 3s to previous image (so hover shows next briefly)
      hoverRevertTimeout = setTimeout(() => {
        // revert to previous (cur)
        setIndex(cur);
        hoverRevertTimeout = null;
      }, 3000);
    });

    // If user clicks inside card (e.g. quick-buy), don't change slider state
    const quick = card.querySelector('.quick-buy2');
    if (quick) {
      quick.addEventListener('click', (e) => {
        e.stopPropagation();
        // quick-buy action: you can attach navigation here later
      });
    }

    // cleanup on mouseleave: keep the revert timeout if scheduled
    card.addEventListener('mouseleave', () => {
      // no immediate action
    });
  });
})();
</script>
